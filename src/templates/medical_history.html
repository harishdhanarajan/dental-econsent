{% extends 'base.html' %}

{% block title %}Medical History - Dr. Hema's Dental Studio{% endblock %}

{% block extra_css %}
<style>
    /* Fix radio button alignment */
    .radio-group {
        margin-left: 20px;
    }
    
    .form-check {
        margin-bottom: 10px;
    }
    
    .form-check-input {
        margin-left: 0;
        margin-right: 10px;
    }
    
    /* Checkbox grid styling */
    .conditions-grid {
        margin-top: 15px;
        padding-left: 20px;
    }
    
    .condition-checkbox {
        margin-bottom: 10px;
    }
    
    /* Section styling */
    .question-section {
        margin-bottom: 2rem;
    }
    
    .question-label {
        font-weight: 600;
        color: #495057;
        margin-bottom: 15px;
        display: block;
    }
</style>
{% endblock %}

{% block content %}
<div class="form-container">
    <div class="progress-container">
        <div class="progress-steps">
            <div class="progress-step completed">
                <i class="bi bi-person-circle"></i> Personal Details
            </div>
            <div class="progress-step active">
                <i class="bi bi-heart-pulse"></i> Medical History
            </div>
            <div class="progress-step">
                <i class="bi bi-tooth"></i> Dental History
            </div>
            <div class="progress-step">
                <i class="bi bi-clipboard-check"></i> E-Consent
            </div>
        </div>
        <div class="progress mt-3">
            <div class="progress-bar" role="progressbar" style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
    </div>
    
    <h2 class="mb-4 text-center">
        <i class="bi bi-heart-pulse text-primary"></i> Medical History
    </h2>
    
    <form action="{{ url_for('medical_history') }}" method="post" class="needs-validation" novalidate>
        <!-- Question 1 -->
        <div class="question-section">
            <label class="question-label">
                1. Are you under medical treatment currently? <span class="text-danger">*</span>
            </label>
            <div class="radio-group">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="under_treatment" id="treatment_yes" value="Yes" required>
                    <label class="form-check-label" for="treatment_yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="under_treatment" id="treatment_no" value="No" required>
                    <label class="form-check-label" for="treatment_no">No</label>
                </div>
                <div class="invalid-feedback">
                    Please select an option.
                </div>
            </div>
        </div>
        
        <!-- Question 2 -->
        <div class="question-section">
            <label class="question-label">
                2. Are you taking any medications? <span class="text-danger">*</span>
            </label>
            <div class="radio-group">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="taking_medications" id="medications_yes" value="Yes" required>
                    <label class="form-check-label" for="medications_yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="taking_medications" id="medications_no" value="No" required>
                    <label class="form-check-label" for="medications_no">No</label>
                </div>
                <div class="invalid-feedback">
                    Please select an option.
                </div>
            </div>
        </div>
        
        <!-- Question 3 -->
        <div class="question-section">
            <label class="question-label">
                3. Do you have allergies (e.g., drugs, latex)? <span class="text-danger">*</span>
            </label>
            <div class="radio-group">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="have_allergies" id="allergies_yes" value="Yes" required>
                    <label class="form-check-label" for="allergies_yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="have_allergies" id="allergies_no" value="No" required>
                    <label class="form-check-label" for="allergies_no">No</label>
                </div>
                <div class="invalid-feedback">
                    Please select an option.
                </div>
            </div>
        </div>
        
        <!-- Question 4 -->
        <div class="question-section">
            <label class="question-label">4. Check any conditions you've had:</label>
            <div class="conditions-grid">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Diabetes" id="condition_diabetes">
                            <label class="form-check-label" for="condition_diabetes">Diabetes</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Heart_Disease" id="condition_heart">
                            <label class="form-check-label" for="condition_heart">Heart Disease</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Asthma" id="condition_asthma">
                            <label class="form-check-label" for="condition_asthma">Asthma</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Epilepsy" id="condition_epilepsy">
                            <label class="form-check-label" for="condition_epilepsy">Epilepsy</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_High_BP" id="condition_highbp">
                            <label class="form-check-label" for="condition_highbp">High BP</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Low_BP" id="condition_lowbp">
                            <label class="form-check-label" for="condition_lowbp">Low BP</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Bleeding_Disorder" id="condition_bleeding">
                            <label class="form-check-label" for="condition_bleeding">Bleeding Disorder</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Liver_Disease" id="condition_liver">
                            <label class="form-check-label" for="condition_liver">Liver Disease</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Kidney_Disease" id="condition_kidney">
                            <label class="form-check-label" for="condition_kidney">Kidney Disease</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Respiratory_Issues" id="condition_respiratory">
                            <label class="form-check-label" for="condition_respiratory">Respiratory Issues</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Cancer" id="condition_cancer">
                            <label class="form-check-label" for="condition_cancer">Cancer</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_HIV_AIDS" id="condition_hiv">
                            <label class="form-check-label" for="condition_hiv">HIV/AIDS</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Hepatitis" id="condition_hepatitis">
                            <label class="form-check-label" for="condition_hepatitis">Hepatitis</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Tuberculosis" id="condition_tb">
                            <label class="form-check-label" for="condition_tb">Tuberculosis</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Thyroid_Issues" id="condition_thyroid">
                            <label class="form-check-label" for="condition_thyroid">Thyroid Issues</label>
                        </div>
                        <div class="form-check condition-checkbox">
                            <input class="form-check-input" type="checkbox" name="condition_Others" id="condition_others">
                            <label class="form-check-label" for="condition_others">Others</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Question 5 -->
        <div class="question-section">
            <label class="question-label">
                5. Are you pregnant? <span class="text-danger">*</span>
            </label>
            <div class="radio-group">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="is_pregnant" id="pregnant_yes" value="Yes" required>
                    <label class="form-check-label" for="pregnant_yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="is_pregnant" id="pregnant_no" value="No" required>
                    <label class="form-check-label" for="pregnant_no">No</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="is_pregnant" id="pregnant_na" value="N/A" required>
                    <label class="form-check-label" for="pregnant_na">N/A</label>
                </div>
                <div class="invalid-feedback">
                    Please select an option.
                </div>
            </div>
        </div>
        
        <!-- Question 6 -->
        <div class="question-section">
            <label class="question-label">
                6. Are you breastfeeding? <span class="text-danger">*</span>
            </label>
            <div class="radio-group">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="is_breastfeeding" id="breastfeeding_yes" value="Yes" required>
                    <label class="form-check-label" for="breastfeeding_yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="is_breastfeeding" id="breastfeeding_no" value="No" required>
                    <label class="form-check-label" for="breastfeeding_no">No</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="is_breastfeeding" id="breastfeeding_na" value="N/A" required>
                    <label class="form-check-label" for="breastfeeding_na">N/A</label>
                </div>
                <div class="invalid-feedback">
                    Please select an option.
                </div>
            </div>
        </div>
        
        <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-outline-secondary btn-nav nav-button" onclick="window.history.back();">
                <i class="bi bi-arrow-left"></i> Back
            </button>
            <button type="submit" class="btn btn-primary btn-nav">
                Next: Dental History <i class="bi bi-arrow-right"></i>
            </button>
        </div>
    </form>
</div>
{% endblock %}