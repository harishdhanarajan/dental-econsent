{% extends 'base.html' %}

{% block title %}Dental History - Dr. Hema's Dental Studio{% endblock %}

{% block extra_css %}
<style>
    /* Fix radio button alignment */
    .radio-group {
        margin-left: 20px;
    }
    
    .form-check {
        margin-bottom: 10px;
    }
    
    .form-check-input {
        margin-left: 0;
        margin-right: 10px;
    }
    
    /* Checkbox grid styling */
    .issues-grid {
        margin-top: 15px;
        padding-left: 20px;
    }
    
    .issue-checkbox {
        margin-bottom: 10px;
    }
    
    /* Section styling */
    .question-section {
        margin-bottom: 2rem;
    }
    
    .question-label {
        font-weight: 600;
        color: #495057;
        margin-bottom: 15px;
        display: block;
    }
    
    /* Textarea styling */
    .form-control.visit-reason {
        margin-left: 20px;
        width: calc(100% - 20px);
    }
</style>
{% endblock %}

{% block content %}
<div class="form-container">
    <div class="progress-container">
        <div class="progress-steps">
            <div class="progress-step completed">
                <i class="bi bi-person-circle"></i> Personal Details
            </div>
            <div class="progress-step completed">
                <i class="bi bi-heart-pulse"></i> Medical History
            </div>
            <div class="progress-step active">
                <i class="bi bi-tooth"></i> Dental History
            </div>
            <div class="progress-step">
                <i class="bi bi-clipboard-check"></i> E-Consent
            </div>
        </div>
        <div class="progress mt-3">
            <div class="progress-bar" role="progressbar" style="width: 75%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
    </div>
    
    <h2 class="mb-4 text-center">
        <i class="bi bi-tooth text-primary"></i> Dental History
    </h2>
    
    <form action="{{ url_for('dental_history') }}" method="post" class="needs-validation" novalidate>
        <!-- Question 1 -->
        <div class="question-section">
            <label class="question-label">
                1. Is this your first dental visit? <span class="text-danger">*</span>
            </label>
            <div class="radio-group">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="first_visit" id="first_visit_yes" value="Yes" required>
                    <label class="form-check-label" for="first_visit_yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="first_visit" id="first_visit_no" value="No" required>
                    <label class="form-check-label" for="first_visit_no">No</label>
                </div>
                <div class="invalid-feedback">
                    Please select an option.
                </div>
            </div>
        </div>
        
        <!-- Question 2 -->
        <div class="question-section">
            <label for="visit_reason" class="question-label">
                2. Reason for today's visit: <span class="text-danger">*</span>
            </label>
            <textarea class="form-control visit-reason" id="visit_reason" name="visit_reason" rows="3" 
                      placeholder="Please describe the reason for your visit..." required></textarea>
            <div class="invalid-feedback">
                Please provide a reason for your visit.
            </div>
        </div>
        
        <!-- Question 3 -->
        <div class="question-section">
            <label class="question-label">
                3. Any previous Dental Treatment? <span class="text-danger">*</span>
            </label>
            <div class="radio-group">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="previous_treatment" id="previous_treatment_yes" value="Yes" required>
                    <label class="form-check-label" for="previous_treatment_yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="previous_treatment" id="previous_treatment_no" value="No" required>
                    <label class="form-check-label" for="previous_treatment_no">No</label>
                </div>
                <div class="invalid-feedback">
                    Please select an option.
                </div>
            </div>
        </div>
        
        <!-- Question 4 -->
        <div class="question-section">
            <label class="question-label">4. Check any issues you've experienced:</label>
            <div class="issues-grid">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-check issue-checkbox">
                            <input class="form-check-input" type="checkbox" name="issue_Toothache" id="issue_toothache">
                            <label class="form-check-label" for="issue_toothache">Toothache</label>
                        </div>
                        <div class="form-check issue-checkbox">
                            <input class="form-check-input" type="checkbox" name="issue_Sensitivity" id="issue_sensitivity">
                            <label class="form-check-label" for="issue_sensitivity">Sensitivity</label>
                        </div>
                        <div class="form-check issue-checkbox">
                            <input class="form-check-input" type="checkbox" name="issue_Gum_Bleeding" id="issue_gum_bleeding">
                            <label class="form-check-label" for="issue_gum_bleeding">Gum Bleeding</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check issue-checkbox">
                            <input class="form-check-input" type="checkbox" name="issue_Bad_Breath" id="issue_bad_breath">
                            <label class="form-check-label" for="issue_bad_breath">Bad Breath</label>
                        </div>
                        <div class="form-check issue-checkbox">
                            <input class="form-check-input" type="checkbox" name="issue_Jaw_Pain" id="issue_jaw_pain">
                            <label class="form-check-label" for="issue_jaw_pain">Jaw Pain</label>
                        </div>
                        <div class="form-check issue-checkbox">
                            <input class="form-check-input" type="checkbox" name="issue_Teeth_Grinding" id="issue_teeth_grinding">
                            <label class="form-check-label" for="issue_teeth_grinding">Teeth Grinding</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check issue-checkbox">
                            <input class="form-check-input" type="checkbox" name="issue_Braces_in_past" id="issue_braces">
                            <label class="form-check-label" for="issue_braces">Braces in past</label>
                        </div>
                        <div class="form-check issue-checkbox">
                            <input class="form-check-input" type="checkbox" name="issue_Dental_Surgery" id="issue_dental_surgery">
                            <label class="form-check-label" for="issue_dental_surgery">Dental Surgery</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-outline-secondary btn-nav nav-button" onclick="window.history.back();">
                <i class="bi bi-arrow-left"></i> Back
            </button>
            <button type="submit" class="btn btn-primary btn-nav">
                Next: E-Consent <i class="bi bi-arrow-right"></i>
            </button>
        </div>
    </form>
</div>
{% endblock %}