{% extends 'base.html' %}

{% block title %}View Clinical Examination - Dr. Hema's Dental Studio{% endblock %}

{% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
<style>
    body { 
        background-color: #f8f9fa; 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    }
    .main-container { 
        max-width: 1000px; 
        margin: 0 auto; 
        padding: 20px; 
    }
    .page-header { 
        background: linear-gradient(135deg, #6c757d 0%, #495057 100%); 
        color: white; 
        padding: 2rem; 
        border-radius: 12px; 
        margin-bottom: 2rem; 
        box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
    }
    .page-header h2 { 
        margin: 0; 
        font-weight: 600; 
        font-size: 1.8rem; 
    }
    .patient-info { 
        background: rgba(255,255,255,0.1); 
        padding: 1rem; 
        border-radius: 8px; 
        margin-top: 1rem; 
    }
    .patient-info .row > div { 
        padding: 0.25rem 0; 
    }
    .form-section { 
        background: white; 
        border-radius: 12px; 
        padding: 2rem; 
        margin-bottom: 2rem; 
        box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        border: 1px solid #e9ecef; 
    }
    .section-header { 
        color: #6c757d; 
        font-weight: 600; 
        font-size: 1.3rem; 
        margin-bottom: 1.5rem; 
        padding-bottom: 0.5rem; 
        border-bottom: 2px solid #e9ecef; 
    }
    .subsection-header { 
        color: #495057; 
        font-weight: 600; 
        font-size: 1.1rem; 
        margin: 2rem 0 1rem; 
        padding: 0.5rem 0; 
        border-bottom: 1px solid #dee2e6; 
    }
    .form-label { 
        font-weight: 500; 
        color: #495057; 
        margin-bottom: 0.5rem; 
    }
    .form-control-plaintext { 
        background-color: #f8f9fa; 
        border: 1px solid #dee2e6; 
        border-radius: 6px; 
        padding: 0.6rem .75rem; 
        font-size: .95rem; 
        color: #212529; 
        min-height: 38px;
        word-wrap: break-word;
    }
    .form-group { 
        margin-bottom: 1.5rem; 
    }
    .form-row { 
        margin-bottom: 1.5rem; 
    }
    .dental-chart-placeholder { 
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); 
        border: 2px dashed #2196f3; 
        border-radius: 8px; 
        padding: 2rem; 
        text-align: center; 
        margin: 1.5rem 0; 
        color: #1976d2; 
    }
    .dental-chart-placeholder i { 
        font-size: 2rem; 
        margin-bottom: 1rem; 
        display: block; 
    }
    .action-buttons { 
        background: white; 
        padding: 1.5rem 2rem; 
        border-radius: 12px; 
        box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        border: 1px solid #e9ecef; 
        margin-top: 2rem; 
    }
    .btn { 
        border-radius: 6px; 
        padding: .6rem 1.5rem; 
        font-weight: 500; 
        transition: all .15s ease-in-out; 
    }
    .btn-secondary { 
        background: #6c757d; 
        border: none; 
        color: white; 
    }
    .btn-secondary:hover { 
        background: #5a6268; 
        transform: translateY(-1px); 
    }
    .view-mode-badge { 
        background: #6c757d; 
        color: white; 
        padding: 0.25rem 0.75rem; 
        border-radius: 6px; 
        font-size: 0.875rem; 
        margin-left: 1rem; 
    }
    @media(max-width: 768px) { 
        .main-container { padding: 15px; } 
        .page-header { padding: 1.5rem; } 
        .page-header h2 { font-size: 1.5rem; } 
        .form-section { padding: 1.5rem; } 
        .action-buttons { padding: 1rem; } 
        .patient-info .row > div { margin-bottom: .5rem; } 
    }
    @media(max-width: 576px) { 
        .section-header { font-size: 1.1rem; } 
        .subsection-header { font-size: 1rem; } 
    }
</style>
{% endblock %}

{% block content %}
<div class="main-container">
    <div class="page-header">
        <h2><i class="bi bi-eye me-2"></i>Clinical Examination Record <span class="view-mode-badge">View Only</span></h2>
        <div class="patient-info">
            <div class="row">
                <div class="col-md-4"><strong>Patient:</strong> {{ patient['Full Name'] }}</div>
                <div class="col-md-2"><strong>ID:</strong> {{ patient['Patient ID'] }}</div>
                <div class="col-md-3"><strong>Age/Gender:</strong> {{ patient['Age'] }}/{{ patient['Gender'] }}</div>
                <div class="col-md-3"><strong>Visit Date:</strong> {{ followup['Visit Date'] }}</div>
            </div>
        </div>
    </div>

    <!-- Chief Complaint & History -->
    <div class="form-section">
        <h3 class="section-header"><i class="bi bi-chat-square-text me-2"></i>Chief Complaint & History</h3>
        <div class="form-group">
            <label class="form-label">Chief Complaint</label>
            <div class="form-control-plaintext">{{ followup.get('Chief Complaint', 'Not recorded') or 'Not recorded' }}</div>
        </div>
        <div class="form-group">
            <label class="form-label">History of Presenting Illness</label>
            <div class="form-control-plaintext">{{ followup.get('History of Presenting Illness', 'Not recorded') or 'Not recorded' }}</div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Past Medical History</label>
                <div class="form-control-plaintext">{{ followup.get('Past Medical History', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Past Dental History</label>
                <div class="form-control-plaintext">{{ followup.get('Past Dental History', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>
    </div>

    <!-- Clinical Findings -->
    <div class="form-section">
        <h3 class="section-header"><i class="bi bi-search me-2"></i>Clinical Findings</h3>
        
        <h4 class="subsection-header">Extraoral Examination</h4>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Face Symmetry</label>
                <div class="form-control-plaintext">{{ followup.get('Face Symmetry', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">TMJ Assessment</label>
                <div class="form-control-plaintext">{{ followup.get('TMJ', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Lymph Nodes</label>
                <div class="form-control-plaintext">{{ followup.get('Lymph Nodes', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Skin/Other Findings</label>
                <div class="form-control-plaintext">{{ followup.get('Skin/Other', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>

        <h4 class="subsection-header">Intraoral Soft Tissues</h4>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Lips</label>
                <div class="form-control-plaintext">{{ followup.get('Lips', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Buccal Mucosa</label>
                <div class="form-control-plaintext">{{ followup.get('Buccal Mucosa', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Tongue</label>
                <div class="form-control-plaintext">{{ followup.get('Tongue', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Floor of Mouth</label>
                <div class="form-control-plaintext">{{ followup.get('Floor of Mouth', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Palate</label>
                <div class="form-control-plaintext">{{ followup.get('Palate', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Gingiva</label>
                <div class="form-control-plaintext">{{ followup.get('Gingiva', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>

        <h4 class="subsection-header">Hard Tissues (Teeth)</h4>
        <div class="dental-chart-placeholder">
            <i class="bi bi-grid-3x3-gap"></i>
            <h5>Dental Chart</h5>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Caries</label>
                <div class="form-control-plaintext">{{ followup.get('Caries', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Missing Teeth</label>
                <div class="form-control-plaintext">{{ followup.get('Missing Teeth', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Occlusion</label>
                <div class="form-control-plaintext">{{ followup.get('Occlusion', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Mobility</label>
                <div class="form-control-plaintext">{{ followup.get('Mobility', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Periodontal Status</label>
                <div class="form-control-plaintext">{{ followup.get('Periodontal Status', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Attrition/Abrasion/Erosion</label>
                <div class="form-control-plaintext">{{ followup.get('Attrition/Abrasion/Erosion', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>
    </div>

    <!-- Radiographic Findings -->
    <div class="form-section">
        <h3 class="section-header"><i class="bi bi-camera me-2"></i>Radiographic Findings</h3>
        <div class="form-group">
            <label class="form-label">Radiographs Taken</label>
            <div class="form-control-plaintext">{{ followup.get('Radiographs Taken', 'Not recorded') or 'Not recorded' }}</div>
        </div>
        <div class="form-group">
            <label class="form-label">Radiographic Observations</label>
            <div class="form-control-plaintext" style="min-height: 100px;">{{ followup.get('Radiographic Observations', 'Not recorded') or 'Not recorded' }}</div>
        </div>
    </div>

    <!-- Diagnosis & Treatment Plan -->
    <div class="form-section">
        <h3 class="section-header"><i class="bi bi-clipboard-check me-2"></i>Diagnosis & Treatment Plan</h3>
        <div class="form-group">
            <label class="form-label">Diagnosis</label>
            <div class="form-control-plaintext">{{ followup.get('Diagnosis', 'Not recorded') or 'Not recorded' }}</div>
        </div>
        <div class="form-group">
            <label class="form-label">Treatment Plan</label>
            <div class="form-control-plaintext" style="min-height: 100px;">{{ followup.get('Treatment', 'Not recorded') or 'Not recorded' }}</div>
        </div>
        <div class="form-group">
            <label class="form-label">Treatment Done</label>
            <div class="form-control-plaintext" style="min-height: 120px;">{{ followup.get('Treatment Done', 'Not recorded') or 'Not recorded' }}</div>
        </div>
        <div class="row">
            <div class="col-md-6 form-group">
                <label class="form-label">Prescription</label>
                <div class="form-control-plaintext" style="min-height: 100px;">{{ followup.get('Prescription', 'Not recorded') or 'Not recorded' }}</div>
            </div>
            <div class="col-md-6 form-group">
                <label class="form-label">Follow-up Notes</label>
                <div class="form-control-plaintext" style="min-height: 100px;">{{ followup.get('Follow-up Notes', 'Not recorded') or 'Not recorded' }}</div>
            </div>
        </div>
        <div class="form-group">
            <label class="form-label">Next Appointment Date</label>
            <div class="form-control-plaintext">{{ followup.get('Next Appointment', 'Not recorded') or 'Not recorded' }}</div>
        </div>
    </div>

    <div class="action-buttons">
        <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
            <a href="{{ url_for('patient_profile', patient_id=patient['Patient ID']) }}" class="btn btn-secondary">
                <i class="bi bi-arrow-left me-1"></i> Back to Patient Profile
            </a>
            <a href="{{ url_for('add_followup', patient_id=patient['Patient ID']) }}" class="btn btn-primary">
                <i class="bi bi-plus-circle me-1"></i> Add New Clinical Examination
            </a>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
